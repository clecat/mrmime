<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mailbox (mrmime.Mrmime.Mailbox)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">mrmime</a> &#x00BB; <a href="../index.html">Mrmime</a> &#x00BB; Mailbox</nav><h1>Module <code>Mrmime.Mailbox</code></h1><nav class="toc"><ul><li><a href="#equals.">Equals.</a></li><li><a href="#pretty-printers.">Pretty-printers.</a></li><li><a href="#decoder-of-mailbox.">Decoder of mailbox.</a></li><li><a href="#encoder-of-mailbox.">Encoder of mailbox.</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = Emile.mailbox</code></dt><dd><p>Type of mailbox. Normally, a mailbox is composed of two parts:</p><ul><li>an optional display name that indicates the name of the recipient (which can be a person or a system) that could be displayed to the user of a mail application, and</li><li>an <i>addr-spec</i> address enclosed in angle brackets (<code>&quot;&lt;&quot;</code> and <code>&quot;&gt;&quot;</code>).</li></ul><p>There is an alternate simple form of a mailbox where the <i>addr-spec</i> address appears alone, without the recipient's name or the angle brackets.</p></dd></dl><section><header><h3 id="equals."><a href="#equals." class="anchor"></a>Equals.</h3></header><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <span>?&#8288;case_sensitive:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-escape_string"><a href="#val-escape_string" class="anchor"></a><code><span class="keyword">val</span> escape_string : string <span>&#45;&gt;</span> string</code></dt><dd><p><code>escape_string x</code> returns a safe <code>string</code> where control characters are escaped (<code>\x00</code>, <code>\x5c</code>, <code>\a</code>, <code>\b</code>, <code>\t</code>, <code>\n</code>, <code>\v</code>, <code>\f</code>, <code>\r</code> and <code>\x22</code> - double quote).</p></dd></dl><div class="spec module" id="module-Phrase"><a href="#module-Phrase" class="anchor"></a><code><span class="keyword">module</span> <a href="Phrase/index.html">Phrase</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Literal_domain"><a href="#module-Literal_domain" class="anchor"></a><code><span class="keyword">module</span> <a href="Literal_domain/index.html">Literal_domain</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Domain"><a href="#module-Domain" class="anchor"></a><code><span class="keyword">module</span> <a href="Domain/index.html">Domain</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Local"><a href="#module-Local" class="anchor"></a><code><span class="keyword">module</span> <a href="Local/index.html">Local</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <span>?&#8288;name:Emile.phrase</span> <span>&#45;&gt;</span> Emile.local <span>&#45;&gt;</span> <span>?&#8288;domains:<span>Emile.domain list</span></span> <span>&#45;&gt;</span> Emile.domain <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>make ?name local ?domains domain</code> returns a <code>mailbox</code> with local-part <code>local</code>, first domain <code>domain</code>, others domains <code>domains</code> (default is an empty list) and an optional name.</p><pre><code class="ml">let me =
  make Local.(v [ w &quot;romain&quot;; w &quot;calascibetta&quot; ])
    ~domains:[ Domain.(v domain [ a &quot;gmail&quot;; a &quot;com&quot; ]) ]
    Domain.(v domain [ a &quot;x25519&quot;; a &quot;net&quot; ]) ;;
val me : t = ....
to_string me ;;
- : string = &quot;&lt;@gmail.com:romain.calascibetta@x25519.net&gt;&quot;</code></pre></dd></dl><dl><dt class="spec value" id="val-(@)"><a href="#val-(@)" class="anchor"></a><code><span class="keyword">val</span> (@) : <span><span class="type-var">'a</span> <a href="Local/index.html#type-local">Local.local</a></span> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'b</span> <a href="Domain/index.html#type-t">Domain.t</a></span> * <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>@</code> operator constructs an usual e-mail address:</p><pre><code class="ml">let me = Local.[ w &quot;romain&quot;; w &quot;calascibetta&quot; ] @ Domain.(domain, [ a &quot;x25519&quot;; a &quot;net&quot; ]) ;;
val me : t = { name= None
             ; local= [ `Atom &quot;romain&quot;; `Atom &quot;calascibetta&quot; ]
             ; domain= (`Domain [&quot;x25519&quot;; &quot;net&quot;], []) }
to_string me ;;
- : string = &quot;romain.calascibetta@x25519.net&quot;</code></pre><p>With only one domain and without a <i>display-name</i>. If you want to put multiple domains, you should use <a href="index.html#val-make"><code>make</code></a> instead. If you want to put a <code>phrase</code>, you can use <code>with_phrase</code>.</p><p><code>@</code> operator can raise <code>Invalid_argument</code> where local-part or domain fail to normalize inputs according standards (see <a href="Local/index.html#val-make"><code>Local.make</code></a> and <a href="Domain/index.html#val-make"><code>Domain.make</code></a>).</p></dd></dl><dl><dt class="spec value" id="val-with_name"><a href="#val-with_name" class="anchor"></a><code><span class="keyword">val</span> with_name : Emile.phrase <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>with_name phrase t</code> put or replace <i>display name</i> of mailbox <code>t</code>.</p><pre><code class="ml">let dbuenzli = with_name Phrase.(v [ w &quot;Daniel&quot;; e ~encoding:q &quot;Bünzli&quot; ]) dbuenzli
val dbuenzli : t = ...
(* Stringify dbuenzli! *)
to_string dbuenzli ;;
- : string = &quot;Daniel =?UTF-8?Q?B=C3=BCnzli?= &lt;daniel.buenzli@erratique.ch&gt;&quot;</code></pre></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string x</code> returns a string which represents <code>x</code> as is it in a e-mails.</p></dd></dl><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, <span>[&gt; Rresult.R.msg ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>of_string x</code> returns a <a href="index.html#type-t"><code>t</code></a> from a well-formed string <code>x</code> according RFC 5322. A <i>mailbox</i> can have several forms and can include <code>FWS</code> tokens. Some examples of what is allowed:</p><ul><li><code>thomas@gazagnaire.org</code></li><li><code>Hannesm &lt;hannes@menhert.org&gt;</code></li><li><code>&lt;anil@recoil.org&gt;</code></li><li><code>Romain Calascibetta &lt;@gmail.com:romain.calascibetta@x25519.net&gt;</code></li><li><code>Daniel =?UTF-8?Q?B=C3=BCnzli?= &lt;daniel.buenzli@erratique.ch&gt;</code></li></ul><p>Any <i>encoded-word</i> are normalized to a valid UTF-8 string (even if <i>charset</i> is something else than <code>&quot;UTF-8&quot;</code>).</p></dd></dl></section><section><header><h3 id="pretty-printers."><a href="#pretty-printers." class="anchor"></a>Pretty-printers.</h3></header><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span><a href="index.html#type-t">t</a> Fmt.t</span></code></dt></dl></section><section><header><h3 id="decoder-of-mailbox."><a href="#decoder-of-mailbox." class="anchor"></a>Decoder of mailbox.</h3></header><div class="spec module" id="module-Decoder"><a href="#module-Decoder" class="anchor"></a><code><span class="keyword">module</span> <a href="Decoder/index.html">Decoder</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="encoder-of-mailbox."><a href="#encoder-of-mailbox." class="anchor"></a>Encoder of mailbox.</h3></header><div class="spec module" id="module-Encoder"><a href="#module-Encoder" class="anchor"></a><code><span class="keyword">module</span> <a href="Encoder/index.html">Encoder</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>